<script src="/javascripts/Chart.min.js"></script>
<h1 class="homepage">Home Page</h1>

<div class="home-page">
  <h1 > <i> TRADE STOCKS EASILY AND SECURILY WITH <a href="/"> <img src="/images/large_financely.png"></a></i></h1>
</div>

<div class="news">
  {{#each favoriteNews}}
    <u><strong><h2 class="news">Latest {{this.symbol}} news and charts</h2></strong></u>
        <button type="button" class="btn btn-primary" onclick="{{this.symbol}}Chart5d()">5 days</button>
        <button type="button" class="btn btn-primary" onclick="{{this.symbol}}Chart1m()">1 month</button>
        <canvas id="{{this.symbol}}" ></canvas>
    <div class="container">
    {{#each this.news}}
          <div class="card mb-3" style="max-width: 540px;">
            <div class="row no-gutters">
              <div class="col-md-8">
                <div class="card-body">
                 <h5 class="card-title">{{this.symbol}}</h5>
                  <p class="card-text"><a href="{{this.url}}">{{this.headline}}</a></p>
              <p class="card-text"><small class="text-muted">{{this.summary}}</small></p>
            </div>
          </div>
        </div>
      </div>
    {{/each}}
    </div>
  {{/each}}
<script>
  {{#each stockHistory5d}}
  let {{this.symbol}}Ctx = document.getElementById('{{this.symbol}}').getContext('2d');
  let {{this.symbol}}Chart5d = function(){
      new Chart({{this.symbol}}Ctx, {
      type: 'line',
      data: {
          datasets: [{
              label: '{{this.symbol}}',
              data: [
              {{#each this.dayArray}}
                {{this.close}},
              {{/each}}
              ],
              backgroundColor: "rgb(152, 214, 216)",
              borderColor:"rgb(75, 192, 192)"
          }],
          labels: [{{#each this.dayArray}}
                  '{{this.label}}',
                {{/each}}]
          
      },
    })
  }
  {{/each}}
  {{#each stockHistory1m}}
    let {{this.symbol}}Chart1m = function(){
      new Chart({{this.symbol}}Ctx, {
      type: 'line',
      data: {
          datasets: [{
              label: '{{this.symbol}}',
              data: [
              {{#each this.dayArray}}
                {{this.close}},
              {{/each}}
              ],
              backgroundColor: "rgb(152, 214, 216)",
              borderColor:"rgb(75, 192, 192)"
          }],
          labels: [{{#each this.dayArray}}
                  '{{this.label}}',
                {{/each}}]
          
      },
    })
  }
  {{/each}}
  {{#each stockHistory6m}}
    let {{this.symbol}}Chart6m = function(){
      new Chart({{this.symbol}}Ctx, {
      type: 'line',
      data: {
          datasets: [{
              label: '{{this.symbol}}',
              data: [
              {{#each this.dayArray}}
                {{this.close}},
              {{/each}}
              ],
              backgroundColor: "rgb(152, 214, 216)",
              borderColor:"rgb(75, 192, 192)"              
          }],
          labels: [{{#each this.dayArray}}
                  '{{this.label}}',
                {{/each}}]
          
      },

    })
  }
  {{/each}}
  function initCharts(){
    {{#each stockHistory5d}}
      {{this.symbol}}Chart5d()
    {{/each}}
  }

  window.onload = initCharts
</script>
</div>